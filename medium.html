<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3. Platform Jumping Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: linear-gradient(to bottom, #4e8cda, #deebfa);
            color: #fff;
            overflow: hidden;
        }

        h1 {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 20px;
            animation: typing 3s steps(30, end), blink-caret 0.75s step-end infinite;
            white-space: nowrap;
            overflow: hidden;
            width: 0; /* Hidden by default */
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: white; }
        }

        canvas {
            background: #fff;
            border: 2px solid #333;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .button {
            padding: 10px 20px;
            font-size: 1.2rem;
            border-radius: 5px;
            border: none;
            background-color: #ff4e50;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .button:hover {
            background-color: #ff7e7e;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1 id="game-title">3. Platform Jumping Game</h1>
    <canvas id="gameCanvas" width="800" height="400"></canvas>

    <div class="controls">
        <button class="button" onclick="move('left')">Left</button>
        <button class="button" onclick="move('right')">Right</button>
        <button class="button" onclick="jump()">Jump</button>
        <button class="button" onclick="gravityShift()">Gravity Shift</button>
    </div>

    <div id="mode-buttons" class="hidden">
        <button class="button" onclick="startGame('easy')">Easy Mode</button>
        <button class="button" onclick="startGame('medium')">Medium Mode</button>
        <button class="button" onclick="startGame('hard')">Hard Mode</button>
        <button class="button" onclick="goHome()">Home</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let player;
        let platforms = [];
        let mode;
        let gameInterval;
        let gravity = 0.5;

        // Typing effect for title
        const title = document.getElementById('game-title');
        let titleLength = 0;
        const titleText = title.innerText;

        function typeTitle() {
            if (titleLength < titleText.length) {
                title.innerText += titleText.charAt(titleLength);
                titleLength++;
                setTimeout(typeTitle, 100);
            } else {
                setTimeout(showModeButtons, 500);
            }
        }

        function showModeButtons() {
            title.classList.add('hidden');
            document.getElementById('mode-buttons').classList.remove('hidden');
        }

        // Player object
        class Player {
            constructor() {
                this.x = 50;
                this.y = canvas.height - 60;
                this.width = 40;
                this.height = 40;
                this.velocityY = 0;
                this.jumping = false;
                this.gravityShifted = false;
            }

            draw() {
                ctx.fillStyle = 'blue';
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }

            move(dx) {
                this.x += dx;
            }

            jump() {
                if (!this.jumping) {
                    this.velocityY = -10;
                    this.jumping = true;
                }
            }

            applyGravity() {
                if (this.jumping) {
                    this.velocityY += gravity;
                    this.y += this.velocityY;

                    if (this.y + this.height >= canvas.height - 20) {
                        this.y = canvas.height - 60;
                        this.jumping = false;
                        this.velocityY = 0;
                    }
                }
            }
        }

        // Platform object
        class Platform {
            constructor(x, y, width) {
                this.x = x;
                this.y = y;
                this.width = width;
            }

            draw() {
                ctx.fillStyle = 'green';
                ctx.fillRect(this.x, this.y, this.width, 10);
            }
        }

        function startGame(selectedMode) {
            mode = selectedMode;
            platforms = [];
            player = new Player();
            gameInterval = setInterval(updateGame, 20);
            generatePlatforms();
        }

        function generatePlatforms() {
            const platformCount = mode === 'easy' ? 5 : mode === 'medium' ? 7 : 9;
            for (let i = 0; i < platformCount; i++) {
                let x = Math.random() * (canvas.width - 100);
                let y = Math.random() * (canvas.height - 100) + 100;
                let width = Math.random() * (100 - 40) + 40;
                platforms.push(new Platform(x, y, width));
            }
        }

        function move(direction) {
            const step = 10;
            if (direction === 'left') player.move(-step);
            if (direction === 'right') player.move(step);
        }

        function jump() {
            player.jump();
        }

        function gravityShift() {
            player.gravityShifted = !player.gravityShifted;
            gravity = player.gravityShifted ? -0.5 : 0.5; // Toggle gravity direction
        }

        function updateGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            player.applyGravity();
            player.draw();

            // Draw platforms
            platforms.forEach(platform => {
                platform.draw();
                if (player.y + player.height >= platform.y && player.x + player.width > platform.x && player.x < platform.x + platform.width) {
                    player.y = platform.y - player.height; // Place player on platform
                    player.jumping = false;
                    player.velocityY = 0;
                }
            });
        }

        function goHome() {
            clearInterval(gameInterval);
            player = null;
            platforms = [];
            titleLength = 0;
            title.innerText = '';
            document.getElementById('mode-buttons').classList.add('hidden');
            typeTitle();
        }

        typeTitle();
    </script>
</body>
</html>
